<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tagging and Querying · QuantumSavory.jl</title><meta name="title" content="Tagging and Querying · QuantumSavory.jl"/><meta property="og:title" content="Tagging and Querying · QuantumSavory.jl"/><meta property="twitter:title" content="Tagging and Querying · QuantumSavory.jl"/><meta name="description" content="Documentation for QuantumSavory.jl."/><meta property="og:description" content="Documentation for QuantumSavory.jl."/><meta property="twitter:description" content="Documentation for QuantumSavory.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script><link href="../assets/custom.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="QuantumSavory.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">QuantumSavory.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">QuantumSavory.jl</a></li><li><a class="tocitem" href="../manual/">Getting Started Manual</a></li><li><span class="tocitem">Explanations</span><ul><li><a class="tocitem" href="../explanations/">Explanations</a></li><li><a class="tocitem" href="../register_interface/">Register Interface</a></li><li><a class="tocitem" href="../properties/">Properties</a></li><li><a class="tocitem" href="../backgrounds/">Background Noise</a></li><li><a class="tocitem" href="../symbolics/">Symbolic Expressions</a></li><li class="is-active"><a class="tocitem" href>Tagging and Querying</a><ul class="internal"><li><a class="tocitem" href="#The-Tag-type"><span>The <code>Tag</code> type</span></a></li><li><a class="tocitem" href="#Assigning-and-removing-tags"><span>Assigning and removing tags</span></a></li><li><a class="tocitem" href="#Querying-for-the-presence-of-a-tag"><span>Querying for the presence of a tag</span></a></li></ul></li><li><a class="tocitem" href="../visualizations/">Visualizations</a></li></ul></li><li><span class="tocitem">How-To Guides</span><ul><li><a class="tocitem" href="../howto/">How-To Guides</a></li><li><a class="tocitem" href="../howto/firstgenrepeater/firstgenrepeater/">1st-gen Repeater - low level implementation</a></li><li><a class="tocitem" href="../howto/firstgenrepeater/firstgenrepeater-clifford/">1st-gen Repeater - Clifford formalism</a></li><li><a class="tocitem" href="../howto/firstgenrepeater_v2/firstgenrepeater_v2/">1st-gen Repeater - simpler implementation</a></li><li><a class="tocitem" href="../howto/congestionchain/congestionchain/">Congestion on a Repeater Chain</a></li><li><a class="tocitem" href="../howto/colorcentermodularcluster/colorcentermodularcluster/">Cluster States in Atomic Memories</a></li><li><a class="tocitem" href="../howto/simpleswitch/simpleswitch/">Entanglement Switch</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorial/">Tutorials</a></li><li><a class="tocitem" href="../tutorial/noninstantgate/">Gate Duration</a></li><li><a class="tocitem" href="../tutorial/state_explorer/">State Explorer</a></li></ul></li><li><span class="tocitem">References</span><ul><li><a class="tocitem" href="../references/">References</a></li><li><a class="tocitem" href="../API/">API</a></li><li><a class="tocitem" href="../API_CircuitZoo/">CircuitZoo API</a></li><li><a class="tocitem" href="../API_StatesZoo/">StatesZoo API</a></li><li><a class="tocitem" href="../API_ProtocolZoo/">ProtocolZoo API</a></li><li><a class="tocitem" href="../bibliography/">Bibliography</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Explanations</a></li><li class="is-active"><a href>Tagging and Querying</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Tagging and Querying</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/QuantumSavory/QuantumSavory.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/master/docs/src/tag_query.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="tagging-and-querying"><a class="docs-heading-anchor" href="#tagging-and-querying">Tagging and Querying</a><a id="tagging-and-querying-1"></a><a class="docs-heading-anchor-permalink" href="#tagging-and-querying" title="Permalink"></a></h1><p>The <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a> and <a href="../API/#QuantumSavory.tag!-Tuple{RegRef, Any}"><code>tag!</code></a> interface lets you manage &quot;classical state&quot; metadata in your simulations. In particular, this interface enables the creation of modular interoperable <a href="../API_ProtocolZoo/#Predefined-Networking-Protocols">control protocols</a>. Each protocol can operate independently of others without knowledge of each others&#39; internals. This is done by using various &quot;tags&quot; to communicate metadata between the network nodes running the protocols, and by the protocols querying for the presence of such tags, leading to greater flexibility when setting up different simulations.</p><p>The components of the query interface which make this possible are described below.</p><h2 id="The-Tag-type"><a class="docs-heading-anchor" href="#The-Tag-type">The <code>Tag</code> type</a><a id="The-Tag-type-1"></a><a class="docs-heading-anchor-permalink" href="#The-Tag-type" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantumSavory.Tag-tag_query" href="#QuantumSavory.Tag-tag_query"><code>QuantumSavory.Tag</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Tags are used to represent classical metadata describing the state (or even history) of nodes and their registers. The library allows the construction of custom tags using the <code>Tag</code> constructor. Currently tags are implemented as instances of a <a href="https://github.com/MasonProtter/SumTypes.jl">sum type</a> and have fairly constrained structure. Most of them are constrained to contain only Symbol instances and integers.</p><p>Here is an example of such a generic tag:</p><pre><code class="language-julia-repl hljs">julia&gt; Tag(:sometagdescriptor, 1, 2, -3)
SymbolIntIntInt(:sometagdescriptor, 1, 2, -3)::Tag</code></pre><p>A tag can have a custom <code>DataType</code> as first argument, in which case additional customizability in printing is available. E.g. consider the [<code>EntanglementHistory</code>] tag used to track how pairs were entangled before a swap happened.</p><pre><code class="language-julia-repl hljs">julia&gt; using QuantumSavory.ProtocolZoo: EntanglementHistory

julia&gt; Tag(EntanglementHistory, 1, 2, 3, 4, 5)
Was entangled to 1.2, but swapped with .5 which was entangled to 3.4</code></pre><p>See also: <a href="../API/#QuantumSavory.tag!-Tuple{RegRef, Any}"><code>tag!</code></a>, <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/0aedafd482585b65af9991b12c03bfd519cd9289/src/tags.jl#L3-L23">source</a></section></article><p>And here are all currently supported tag signatures:</p><pre><code class="language-julia hljs">[tuple(m.sig.types[2:end]...) for m in methods(Tag) if m.sig.types[2] ∈ (Symbol, DataType)]</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">17-element Vector{Tuple{DataType, Vararg{DataType}}}:
 (Symbol, Int64, Int64, Int64)
 (Symbol, Int64, Int64)
 (Symbol, Int64)
 (Symbol, Int64, Int64, Int64, Int64, Int64, Int64)
 (Symbol, Int64, Int64, Int64, Int64, Int64)
 (Symbol, Int64, Int64, Int64, Int64)
 (Symbol,)
 (DataType,)
 (DataType, Int64)
 (DataType, Int64, Int64)
 (DataType, Int64, Int64, Int64)
 (DataType, Int64, Int64, Int64, Int64)
 (DataType, Int64, Int64, Int64, Int64, Int64)
 (DataType, Int64, Int64, Int64, Int64, Int64, Int64)
 (DataType, Symbol)
 (DataType, Symbol, Int64)
 (DataType, Symbol, Int64, Int64)</code></pre><h2 id="Assigning-and-removing-tags"><a class="docs-heading-anchor" href="#Assigning-and-removing-tags">Assigning and removing tags</a><a id="Assigning-and-removing-tags-1"></a><a class="docs-heading-anchor-permalink" href="#Assigning-and-removing-tags" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantumSavory.tag!-tag_query" href="#QuantumSavory.tag!-tag_query"><code>QuantumSavory.tag!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">tag!(ref::RegRef, tag) -&gt; Int128
</code></pre><p>Assign a tag to a slot in a register.</p><p>See also: <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a>, <a href="../API/#QuantumSavory.untag!-Tuple{Union{RegRef, Register}, Integer}"><code>untag!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/0aedafd482585b65af9991b12c03bfd519cd9289/src/queries.jl#L13">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantumSavory.untag!-tag_query" href="#QuantumSavory.untag!-tag_query"><code>QuantumSavory.untag!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">untag!(
    ref::Union{RegRef, Register},
    id::Integer
) -&gt; @NamedTuple{tag::Tag, slot::Int64, time::Float64}
</code></pre><p>Remove the tag with the given id from a <a href="../API/#QuantumSavory.RegRef"><code>RegRef</code></a> or a <a href="../API/#QuantumSavory.Register"><code>Register</code></a>.</p><p>To remove a tag based on a query, use <a href="#querydelete!"><code>querydelete!</code></a> instead.</p><p>See also: <a href="#querydelete!"><code>querydelete!</code></a>, <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a>, <a href="../API/#QuantumSavory.tag!-Tuple{RegRef, Any}"><code>tag!</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/0aedafd482585b65af9991b12c03bfd519cd9289/src/queries.jl#L31">source</a></section></article><h2 id="Querying-for-the-presence-of-a-tag"><a class="docs-heading-anchor" href="#Querying-for-the-presence-of-a-tag">Querying for the presence of a tag</a><a id="Querying-for-the-presence-of-a-tag-1"></a><a class="docs-heading-anchor-permalink" href="#Querying-for-the-presence-of-a-tag" title="Permalink"></a></h2><p>The <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a> function allows the user to query for <a href="../API/#QuantumSavory.Tag"><code>Tag</code></a>s in three different cases:</p><ul><li>on a particular qubit slot (<a href="../API/#QuantumSavory.RegRef"><code>RegRef</code></a>) in a <a href="../API/#QuantumSavory.Register"><code>Register</code></a> node;</li><li>on a <a href="../API/#QuantumSavory.Register"><code>Register</code></a> to query for any slot that contains the passed <code>Tag</code>;</li><li>on a <a href="../API/#QuantumSavory.messagebuffer-Tuple{RegisterNet, Int64}"><code>messagebuffer</code></a> to query for a particular <code>Tag</code> received from another node in a network.</li></ul><p>The <code>Tag</code> description passed to <code>query</code> can include predicate functions (of the form <code>x -&gt; pass::Bool</code>) and wildcards (the <a href="../API/#QuantumSavory.❓"><code>❓</code></a> variable), for situations where we have freedom in what tag we are exactly searching for.</p><p>The queries can search in <code>FIFO</code> or <code>FILO</code> order (<code>FILO</code> by default). E.g., for the default <code>FILO</code>, a query on a <a href="../API/#QuantumSavory.RegRef"><code>RegRef</code></a> returns the <code>Tag</code> which is at the end of the vector of tags stored the given slot (as new tags are appended at the end). On a <a href="../API/#QuantumSavory.Register"><code>Register</code></a> it returns the slot with the &quot;youngest&quot; age.</p><p>One can also query by &quot;lock&quot; and &quot;assignment&quot; status of a given slot, by using the <code>locked</code> and <code>assigned</code> boolean keywords. By default these keywords are set to <code>nothing</code> and these properties are not checked.</p><p>Following is a detailed description of each <code>query</code> method</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantumSavory.query-tag_query" href="#QuantumSavory.query-tag_query"><code>QuantumSavory.query</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">query(
    reg::Union{RegRef, Register},
    queryargs::Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}...;
    locked,
    assigned,
    filo
) -&gt; Any
</code></pre><p>A query function searching for the first slot in a register that has a given tag.</p><p>Wildcards are supported (instances of <code>Wildcard</code> also available as the constants <a href="../API/#QuantumSavory.W"><code>W</code></a> or the emoji <a href="../API/#QuantumSavory.❓"><code>❓</code></a> which can be entered as <code>\:question:</code> in the REPL). Predicate functions are also supported (they have to be <code>Int</code>↦<code>Bool</code> functions). The order of query lookup can be specified in terms of FIFO or FILO and defaults to FILO if not specified. The keyword arguments <code>locked</code> and <code>assigned</code> can be used to check, respectively, whether the given slot is locked or whether it contains a quantum state. The keyword argument <code>filo</code> can be used to specify whether the search should be done in a FIFO or FILO order, defaulting to <code>filo=true</code> (i.e. a stack-like behavior).</p><pre><code class="language-julia-repl hljs">julia&gt; r = Register(10);
       tag!(r[1], :symbol, 2, 3);
       tag!(r[2], :symbol, 4, 5);


julia&gt; query(r, :symbol, 4, 5)
(slot = Slot 2, id = 4, tag = SymbolIntInt(:symbol, 4, 5)::Tag)

julia&gt; lock(r[1]);

julia&gt; query(r, :symbol, 4, 5; locked=false) |&gt; isnothing
false

julia&gt; query(r, :symbol, ❓, 3)
(slot = Slot 1, id = 3, tag = SymbolIntInt(:symbol, 2, 3)::Tag)

julia&gt; query(r, :symbol, ❓, 3; assigned=true) |&gt; isnothing
true

julia&gt; query(r, :othersym, ❓, ❓) |&gt; isnothing
true

julia&gt; tag!(r[5], Int, 4, 5);

julia&gt; query(r, Float64, 4, 5) |&gt; isnothing
true

julia&gt; query(r, Int, 4, &gt;(7)) |&gt; isnothing
true

julia&gt; query(r, Int, 4, &lt;(7))
(slot = Slot 5, id = 5, tag = TypeIntInt(Int64, 4, 5)::Tag)</code></pre><p>A <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a> can be on on a single slot of a register:</p><pre><code class="language-julia-repl hljs">julia&gt; r = Register(5);

julia&gt; tag!(r[2], :symbol, 2, 3);

julia&gt; query(r[2], :symbol, 2, 3)
(slot = Slot 2, id = 6, tag = SymbolIntInt(:symbol, 2, 3)::Tag)

julia&gt; query(r[3], :symbol, 2, 3) === nothing
true

julia&gt; queryall(r[2], :symbol, 2, 3)
1-element Vector{@NamedTuple{slot::RegRef, id::Int128, tag::Tag}}:
 (slot = Slot 2, id = 6, tag = SymbolIntInt(:symbol, 2, 3)::Tag)</code></pre><p>See also: <a href="#queryall"><code>queryall</code></a>, <a href="../API/#QuantumSavory.tag!-Tuple{RegRef, Any}"><code>tag!</code></a>, <a href="../API/#QuantumSavory.W"><code>W</code></a>, <a href="../API/#QuantumSavory.❓"><code>❓</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/0aedafd482585b65af9991b12c03bfd519cd9289/src/queries.jl#L100">source</a></section><section><div><pre><code class="language-julia hljs">query(
    mb::MessageBuffer,
    queryargs::Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}...
) -&gt; Union{Nothing, NamedTuple{(:depth, :src, :tag), &lt;:Tuple{Int64, Any, Any}}}
</code></pre><p>You are advised to actually use <a href="#querydelete!"><code>querydelete!</code></a>, not <code>query</code> when working with classical message buffers.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/0aedafd482585b65af9991b12c03bfd519cd9289/src/queries.jl#L173">source</a></section></article><h3 id="Wildcards"><a class="docs-heading-anchor" href="#Wildcards">Wildcards</a><a id="Wildcards-1"></a><a class="docs-heading-anchor-permalink" href="#Wildcards" title="Permalink"></a></h3><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantumSavory.W-tag_query" href="#QuantumSavory.W-tag_query"><code>QuantumSavory.W</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A wildcard instance for use with the tag querying functionality.</p><p>See also: <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a>, <a href="../API/#QuantumSavory.tag!-Tuple{RegRef, Any}"><code>tag!</code></a>, <a href="../API/#QuantumSavory.❓"><code>❓</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/0aedafd482585b65af9991b12c03bfd519cd9289/src/queries.jl#L58-L61">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantumSavory.❓-tag_query" href="#QuantumSavory.❓-tag_query"><code>QuantumSavory.❓</code></a> — <span class="docstring-category">Constant</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>A wildcard instance for use with the tag querying functionality.</p><p>This emoji can be inputted with the <code>\:question:</code> emoji shortcut, or you can simply use the ASCII alternative <a href="../API/#QuantumSavory.W"><code>W</code></a>.</p><p>See also: <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a>, <a href="../API/#QuantumSavory.tag!-Tuple{RegRef, Any}"><code>tag!</code></a>, <a href="../API/#QuantumSavory.W"><code>W</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/0aedafd482585b65af9991b12c03bfd519cd9289/src/queries.jl#L64-L70">source</a></section></article><h3 id="querydelete!"><a class="docs-heading-anchor" href="#querydelete!"><code>querydelete!</code></a><a id="querydelete!-1"></a><a class="docs-heading-anchor-permalink" href="#querydelete!" title="Permalink"></a></h3><p>A method on top of <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a>, which allows to query for tag in a <a href="../API/#QuantumSavory.RegRef"><code>RegRef</code></a> or a <a href="../API/#QuantumSavory.messagebuffer-Tuple{RegisterNet, Int64}"><code>messagebuffer</code></a>, returning the tag that satisfies the passed predicates and wildcars, <strong>and deleting it from the list at the same time</strong>. It otherwise has the same signature as <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantumSavory.querydelete!-tag_query" href="#QuantumSavory.querydelete!-tag_query"><code>QuantumSavory.querydelete!</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">querydelete!(
    mb::MessageBuffer,
    args...
) -&gt; Union{Nothing, @NamedTuple{src::Union{Nothing, Int64}, tag::T} where T}
</code></pre><p>A <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a> for classical message buffers that also deletes the message out of the buffer.</p><pre><code class="language-julia-repl hljs">julia&gt; net = RegisterNet([Register(3), Register(2)])
A network of 2 registers in a graph of 1 edges

julia&gt; put!(channel(net, 1=&gt;2), Tag(:my_tag));

julia&gt; put!(channel(net, 1=&gt;2), Tag(:another_tag, 123, 456));

julia&gt; query(messagebuffer(net, 2), :my_tag)

julia&gt; run(get_time_tracker(net))

julia&gt; query(messagebuffer(net, 2), :my_tag)
(depth = 1, src = 1, tag = Symbol(:my_tag)::Tag)

julia&gt; querydelete!(messagebuffer(net, 2), :my_tag)
@NamedTuple{src::Union{Nothing, Int64}, tag::Tag}((1, Symbol(:my_tag)::Tag))

julia&gt; querydelete!(messagebuffer(net, 2), :my_tag) === nothing
true

julia&gt; querydelete!(messagebuffer(net, 2), :another_tag, ❓, ❓)
@NamedTuple{src::Union{Nothing, Int64}, tag::Tag}((1, SymbolIntInt(:another_tag, 123, 456)::Tag))

julia&gt; querydelete!(messagebuffer(net, 2), :another_tag, ❓, ❓) === nothing
true</code></pre><p>You can also wait on a message buffer for a message to arrive before running a query:</p><pre><code class="language-julia-repl hljs">julia&gt; using ResumableFunctions; using ConcurrentSim;

julia&gt; net = RegisterNet([Register(3), Register(2), Register(3)])
A network of 3 registers in a graph of 2 edges

julia&gt; env = get_time_tracker(net);

julia&gt; @resumable function receive_tags(env)
           while true
               mb = messagebuffer(net, 2)
               @yield wait(mb)
               msg = querydelete!(mb, :second_tag, ❓, ❓)
               print(&quot;t=$(now(env)): query returns &quot;)
               if isnothing(msg)
                   println(&quot;nothing&quot;)
               else
                   println(&quot;$(msg.tag) received from node $(msg.src)&quot;)
               end
           end
       end
receive_tags (generic function with 1 method)

julia&gt; @resumable function send_tags(env)
           @yield timeout(env, 1.0)
           put!(channel(net, 1=&gt;2), Tag(:my_tag))
           @yield timeout(env, 2.0)
           put!(channel(net, 3=&gt;2), Tag(:second_tag, 123, 456))
       end
send_tags (generic function with 1 method)

julia&gt; @process send_tags(env);

julia&gt; @process receive_tags(env);

julia&gt; run(env, 10)
t=1.0: query returns nothing
t=3.0: query returns SymbolIntInt(:second_tag, 123, 456)::Tag received from node 3</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/0aedafd482585b65af9991b12c03bfd519cd9289/src/queries.jl#L251">source</a></section><section><div><pre><code class="language-julia hljs">querydelete!(
    reg::Union{RegRef, Register},
    args...;
    kwa...
) -&gt; Any
</code></pre><p>A <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a> for <a href="../API/#QuantumSavory.Register"><code>Register</code></a> or a register slot (i.e. a <a href="../API/#QuantumSavory.RegRef"><code>RegRef</code></a>) that also deletes the tag.</p><pre><code class="language-julia-repl hljs">julia&gt; reg = Register(3)
       tag!(reg[1], :tagA, 1, 2, 3)
       tag!(reg[2], :tagA, 10, 20, 30)
       tag!(reg[2], :tagB, 6, 7, 8);

julia&gt; queryall(reg, :tagA, ❓, ❓, ❓)
2-element Vector{@NamedTuple{slot::RegRef, id::Int128, tag::Tag}}:
 (slot = Slot 2, id = 4, tag = SymbolIntIntInt(:tagA, 10, 20, 30)::Tag)
 (slot = Slot 1, id = 3, tag = SymbolIntIntInt(:tagA, 1, 2, 3)::Tag)

julia&gt; querydelete!(reg, :tagA, ❓, ❓, ❓)
(slot = Slot 2, id = 4, tag = SymbolIntIntInt(:tagA, 10, 20, 30)::Tag)

julia&gt; queryall(reg, :tagA, ❓, ❓, ❓)
1-element Vector{@NamedTuple{slot::RegRef, id::Int128, tag::Tag}}:
 (slot = Slot 1, id = 3, tag = SymbolIntIntInt(:tagA, 1, 2, 3)::Tag)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/0aedafd482585b65af9991b12c03bfd519cd9289/src/queries.jl#L331">source</a></section></article><h3 id="queryall"><a class="docs-heading-anchor" href="#queryall"><code>queryall</code></a><a id="queryall-1"></a><a class="docs-heading-anchor-permalink" href="#queryall" title="Permalink"></a></h3><p>A method defined on top of <a href="../API/#QuantumSavory.query-Union{Tuple{N}, Tuple{MessageBuffer, Vararg{Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}, N}}} where N"><code>query</code></a> which allows to query for <strong>all tags</strong> in a <a href="../API/#QuantumSavory.RegRef"><code>RegRef</code></a> or a <a href="../API/#QuantumSavory.Register"><code>Register</code></a> that match the query.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="QuantumSavory.queryall-tag_query" href="#QuantumSavory.queryall-tag_query"><code>QuantumSavory.queryall</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">queryall(
    reg::Union{RegRef, Register},
    queryargs::Union{QuantumSavory.Wildcard, Int64, DataType, Function, Symbol}...;
    filo,
    kwargs...
) -&gt; Any
</code></pre><p>A query function that returns all slots of a register that have a given tag, with support for predicates and wildcards.</p><pre><code class="language-julia-repl hljs">julia&gt; r = Register(10);
       tag!(r[1], :symbol, 2, 3);
       tag!(r[2], :symbol, 4, 5);

julia&gt; queryall(r, :symbol, ❓, ❓)
2-element Vector{@NamedTuple{slot::RegRef, id::Int128, tag::Tag}}:
 (slot = Slot 2, id = 2, tag = SymbolIntInt(:symbol, 4, 5)::Tag)
 (slot = Slot 1, id = 1, tag = SymbolIntInt(:symbol, 2, 3)::Tag)

julia&gt; queryall(r, :symbol, ❓, &gt;(4))
1-element Vector{@NamedTuple{slot::RegRef, id::Int128, tag::Tag}}:
 (slot = Slot 2, id = 2, tag = SymbolIntInt(:symbol, 4, 5)::Tag)

julia&gt; queryall(r, :symbol, ❓, &gt;(5))
@NamedTuple{slot::RegRef, id::Int128, tag::Tag}[]</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/QuantumSavory/QuantumSavory.jl/blob/0aedafd482585b65af9991b12c03bfd519cd9289/src/queries.jl#L73">source</a></section></article><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../symbolics/">« Symbolic Expressions</a><a class="docs-footer-nextpage" href="../visualizations/">Visualizations »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.9.0 on <span class="colophon-date" title="Thursday 27 March 2025 20:55">Thursday 27 March 2025</span>. Using Julia version 1.11.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
